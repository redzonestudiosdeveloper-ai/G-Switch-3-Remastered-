<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>GSwitch 3 Unblocked - ubg235 Poki</title>
    
    <meta id="viewport" name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta name="apple-mobile-web-app-capable" content="yes">

    <link rel="shortcut icon" type="image/png" href="./favicon.png">
    
    <script type="text/javascript" src="./G-Switch3.js"></script>
    <script src="patch/js/poki-sdk.js"></script>

    <script>
        // Dokunmatik hareketi engelle
        window.addEventListener("touchmove", function(event) { 
            event.preventDefault(); 
        }, { capture: false, passive: false });

        // Yüksek çözünürlüklü cihazlar için scale ayarı
        if (typeof window.devicePixelRatio !== 'undefined' && window.devicePixelRatio > 2) {
            var meta = document.getElementById("viewport");
            meta.setAttribute(
                'content',
                'width=device-width, initial-scale=' + (2 / window.devicePixelRatio) + ', user-scalable=no'
            );
        }

        // =========================
        // Tam ekran fonksiyonu
        // =========================
        function enterFullscreen() {
            let elem = document.documentElement;
            if (!document.fullscreenElement && !document.webkitFullscreenElement && !document.msFullscreenElement) {
                if (elem.requestFullscreen) {
                    elem.requestFullscreen();
                } else if (elem.webkitRequestFullscreen) {
                    elem.webkitRequestFullscreen();
                } else if (elem.msRequestFullscreen) {
                    elem.msRequestFullscreen();
                }
            }
        }

        // =========================
        // Landscape modunu zorla
        // =========================
        function enforceLandscape() {
            const width = window.innerWidth;
            const height = window.innerHeight;
            const game = document.getElementById("openfl-content");

            if (width < height) {
                // Dikeyse oyun alanını 90 derece döndür
                game.style.transform = "rotate(90deg)";
                game.style.transformOrigin = "center center";
                game.style.width = `${height}px`;
                game.style.height = `${width}px`;
                game.style.position = "absolute";
                game.style.top = `${(height - width)/2}px`;
                game.style.left = `${(width - height)/2}px`;
            } else {
                // Yatay ise normal
                game.style.transform = "none";
                game.style.width = "100%";
                game.style.height = "100%";
                game.style.position = "static";
            }
        }

        // =========================
        // Otomatik tam ekran ve landscape (sayfa yüklendiğinde)
        // =========================
        window.addEventListener("load", function autoFullscreenLandscape() {
            enterFullscreen();
            enforceLandscape();

            // Artık click veya touch ile tekrar tam ekran veya landscape olmasın
            document.removeEventListener("click", clickHandler);
            document.removeEventListener("touchstart", touchHandler);
        });

        // =========================
        // Pencere boyutu veya yön değişince landscape zorla
        // =========================
        window.addEventListener("resize", enforceLandscape);
        window.addEventListener("orientationchange", enforceLandscape);

        // =========================
        // Pause sistemi (S + R)
        // =========================
        let pauseKeys = {};
        let isPaused = false;
        document.addEventListener("keydown", function(e) {
            pauseKeys[e.key.toLowerCase()] = true;
            if (pauseKeys["s"] && pauseKeys["r"]) togglePause();
        });
        document.addEventListener("keyup", function(e) {
            pauseKeys[e.key.toLowerCase()] = false;
        });

        function togglePause() {
            let game = document.getElementById("openfl-content");
            if (!isPaused) {
                game.style.filter = "grayscale(1)";
                game.style.pointerEvents = "none";
                isPaused = true;
            } else {
                game.style.filter = "none";
                game.style.pointerEvents = "auto";
                isPaused = false;
            }
        }

        // =========================
        // Mouse tek tık space simülasyonu
        // =========================
        document.addEventListener("click", function clickHandler() {
            let event = new KeyboardEvent("keydown", {
                key: " ",
                code: "Space",
                keyCode: 32,
                which: 32,
                bubbles: true
            });
            document.dispatchEvent(event);
        });

        document.addEventListener("touchstart", function touchHandler() {
            let event = new KeyboardEvent("keydown", {
                key: " ",
                code: "Space",
                keyCode: 32,
                which: 32,
                bubbles: true
            });
            document.dispatchEvent(event);
        });

    </script>

    <style>
        html, body {
            margin: 0;
            padding: 0;
            height: 100%;
            overflow: hidden;
            background: #000;
        }

        #openfl-content {
            width: 100%;
            height: 100%;
            background: #000;
        }

        @font-face {
            font-family: 'Meiryo UI';
            src: url('assets/data/MeiryoUI.woff') format('woff');
        }
        @font-face {
            font-family: 'Verdana';
            src: url('assets/data/verdana.woff') format('woff');
        }
    </style>
</head>
<body>
    <noscript>
        This webpage makes extensive use of JavaScript. Please enable JavaScript in your web browser.
    </noscript>
    
    <div id="openfl-content"></div>
    
    <script>
        lime.embed("G-Switch3", "openfl-content", 0, 0, { parameters: {} });
    </script>

    <script src="js/analytics_ubg_v1_4.js"></script>
    <script src="js/ubg235_client_v1_1.js"></script>
</body>
</html>
